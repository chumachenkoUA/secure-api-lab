# Secure API Lab

Ця лабораторна робота демонструє побудову мініатюрного Node.js/Express API із захищеним доступом до службових документів та конфіденційних даних співробітників. Сервер використовує заголовки `X-Login` та `X-Password` для аутентифікації, застосовує рольову модель та реєструє всі запити. Це дозволяє відпрацювати типові підходи до побудови middleware для авторизації, аудиту та валідації в REST‑сервісах.

API містить відкритий маршрут для перевірки працездатності та захищені маршрути для роботи з документами (CRUD-операції читання, створення й видалення) і списком співробітників. Останній доступний лише користувачам із роллю адміністратора, що демонструє поділ прав доступу.

## Встановлення та запуск

1. Встановіть залежності:
   ```bash
   npm install
   ```
2. Запустіть сервер розробки (порт за замовчуванням `3000`):
   ```bash
   npm start
   ```

## Тестовий клієнт

Скрипт `test-client.js` послідовно виконує кілька сценаріїв: успішне отримання документів, спробу доступу до адмінського ресурсу без прав та успішний адмінський виклик. Запустіть його окремо після старту сервера:

```bash
  npm test
```

## Ендпоінти

| HTTP-метод та URL | Опис | Необхідні заголовки | Приклад тіла запиту | Можливі коди відповіді |
| --- | --- | --- | --- | --- |
| `GET /` | Перевірка, що сервер працює. | — | — | `200 OK` – текстове повідомлення. |
| `GET /documents` | Повертає всі доступні документи. | `X-Login`, `X-Password` (будь-який дійсний користувач). | — | `200 OK` – список документів; `401 Unauthorized` – відсутні/невалідні креденшали. |
| `POST /documents` | Створює новий документ у сховищі. | `X-Login`, `X-Password` (будь-який дійсний користувач). | ```json\n{ "title": "Security Policy", "content": "All laptops must be encrypted." }\n``` | `201 Created` – документ створено; `400 Bad Request` – відсутні `title` або `content`; `401 Unauthorized` – невалідні заголовки. |
| `DELETE /documents/:id` | Видаляє документ за ідентифікатором. | `X-Login`, `X-Password` (будь-який дійсний користувач). | — | `204 No Content` – успішне видалення; `401 Unauthorized`; `404 Not Found` – документ не існує. |
| `GET /employees` | Повертає список співробітників (тільки для адміністраторів). | `X-Login`, `X-Password` (користувач із роллю `admin`). | — | `200 OK` – список співробітників; `401 Unauthorized`; `403 Forbidden` – недостатньо прав. |

## Репозиторій

https://github.com/chumachenkoUA/secure-api-lab
